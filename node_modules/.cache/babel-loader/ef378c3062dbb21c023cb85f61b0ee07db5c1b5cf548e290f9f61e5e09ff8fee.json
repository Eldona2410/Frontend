{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\HP\\\\Downloads\\\\AutoOne\\\\frontend\\\\src\\\\pages\\\\BookingForm.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useContext } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { ApiContext } from '../App';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function BookingForm({\n  i18n\n}) {\n  _s();\n  const {\n    id\n  } = useParams();\n  const {\n    api\n  } = useContext(ApiContext);\n  const nav = useNavigate();\n  const [service, setService] = useState(null);\n  const [form, setForm] = useState({\n    name: '',\n    email: '',\n    date: ''\n  });\n  useEffect(() => {\n    fetch(`${api}/api/services`).then(r => r.json()).then(list => setService(list.find(s => s.id == id)));\n  }, [api, id]);\n  const submit = async e => {\n    e.preventDefault();\n    // simple register / login by email: register then create booking\n    try {\n      const reg = await fetch(`${api}/api/auth/register`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          email: form.email,\n          name: form.name\n        })\n      }).then(r => r.json());\n      const token = reg.token;\n      const booking = await fetch(`${api}/api/bookings`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': 'Bearer ' + token\n        },\n        body: JSON.stringify({\n          service_id: id,\n          date: form.date\n        })\n      }).then(r => r.json());\n      alert('Booking confirmed! ID: ' + booking.id);\n      nav('/profile');\n    } catch (err) {\n      console.error(err);\n      alert('Error creating booking (check backend).');\n    }\n  };\n  if (!service) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"Loading...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 36,\n    columnNumber: 23\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: [i18n.booking, \": \", service.name]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: submit,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: i18n.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 41,\n          columnNumber: 31\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"form-control\",\n          value: form.name,\n          onChange: e => setForm({\n            ...form,\n            name: e.target.value\n          }),\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 41,\n          columnNumber: 57\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: i18n.email\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 31\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"email\",\n          className: \"form-control\",\n          value: form.email,\n          onChange: e => setForm({\n            ...form,\n            email: e.target.value\n          }),\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 58\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: i18n.date\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 43,\n          columnNumber: 31\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"datetime-local\",\n          className: \"form-control\",\n          value: form.date,\n          onChange: e => setForm({\n            ...form,\n            date: e.target.value\n          }),\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 43,\n          columnNumber: 57\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-success\",\n        type: \"submit\",\n        children: i18n.confirm\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 38,\n    columnNumber: 5\n  }, this);\n}\n_s(BookingForm, \"K2r3CRbRc/i47mFcNrss3NBHsK0=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = BookingForm;\nvar _c;\n$RefreshReg$(_c, \"BookingForm\");","map":{"version":3,"names":["React","useState","useEffect","useContext","useParams","useNavigate","ApiContext","jsxDEV","_jsxDEV","BookingForm","i18n","_s","id","api","nav","service","setService","form","setForm","name","email","date","fetch","then","r","json","list","find","s","submit","e","preventDefault","reg","method","headers","body","JSON","stringify","token","booking","service_id","alert","err","console","error","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","className","value","onChange","target","required","type","confirm","_c","$RefreshReg$"],"sources":["C:/Users/HP/Downloads/AutoOne/frontend/src/pages/BookingForm.js"],"sourcesContent":["import React, {useState, useEffect, useContext} from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { ApiContext } from '../App';\n\nexport default function BookingForm({i18n}){\n  const {id} = useParams();\n  const {api} = useContext(ApiContext);\n  const nav = useNavigate();\n  const [service,setService] = useState(null);\n  const [form,setForm] = useState({name:'',email:'',date:''});\n  useEffect(()=>{\n    fetch(`${api}/api/services`).then(r=>r.json()).then(list=>setService(list.find(s=>s.id==id)));\n  },[api,id]);\n\n  const submit = async (e)=>{\n    e.preventDefault();\n    // simple register / login by email: register then create booking\n    try{\n      const reg = await fetch(`${api}/api/auth/register`,{\n        method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email:form.email,name:form.name})\n      }).then(r=>r.json());\n      const token = reg.token;\n      const booking = await fetch(`${api}/api/bookings`,{\n        method:'POST',\n        headers:{'Content-Type':'application/json','Authorization':'Bearer '+token},\n        body:JSON.stringify({service_id: id, date: form.date})\n      }).then(r=>r.json());\n      alert('Booking confirmed! ID: '+booking.id);\n      nav('/profile');\n    }catch(err){\n      console.error(err);\n      alert('Error creating booking (check backend).');\n    }\n  };\n\n  if(!service) return <div>Loading...</div>;\n  return (\n    <div>\n      <h3>{i18n.booking}: {service.name}</h3>\n      <form onSubmit={submit}>\n        <div className=\"mb-2\"><label>{i18n.name}</label><input className=\"form-control\" value={form.name} onChange={e=>setForm({...form,name:e.target.value})} required/></div>\n        <div className=\"mb-2\"><label>{i18n.email}</label><input type=\"email\" className=\"form-control\" value={form.email} onChange={e=>setForm({...form,email:e.target.value})} required/></div>\n        <div className=\"mb-2\"><label>{i18n.date}</label><input type=\"datetime-local\" className=\"form-control\" value={form.date} onChange={e=>setForm({...form,date:e.target.value})} required/></div>\n        <button className=\"btn btn-success\" type=\"submit\">{i18n.confirm}</button>\n      </form>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}