{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\RVAISH\\\\Downloads\\\\AutoOne\\\\frontend\\\\src\\\\pages\\\\ServiceList.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useContext } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { ApiContext } from '../App';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function ServiceList({\n  i18n\n}) {\n  _s();\n  const {\n    type\n  } = useParams();\n  const {\n    api\n  } = useContext(ApiContext);\n  const [services, setServices] = useState([]);\n  const [bookingServiceId, setBookingServiceId] = useState(null);\n  const [bookingDate, setBookingDate] = useState('');\n  const [message, setMessage] = useState('');\n  useEffect(() => {\n    fetch(`${api}/api/services`, {\n      headers: {\n        'Accept': 'application/json'\n      }\n    }).then(r => r.json()).then(data => {\n      if (Array.isArray(data)) setServices(data);else if (data.data && Array.isArray(data.data)) setServices(data.data);else setServices([]);\n    }).catch(() => setServices([]));\n  }, [api]);\n  const filtered = Array.isArray(services) ? services.filter(s => s.type === type) : [];\n  const handleBooking = async serviceId => {\n    if (!bookingDate) {\n      setMessage('Please select a date.');\n      return;\n    }\n    const bookingData = {\n      service_id: serviceId,\n      date: bookingDate,\n      user_id: 1 // dummy user_id for now\n    };\n    try {\n      const res = await fetch(`${api}/api/bookings`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(bookingData)\n      });\n      const data = await res.json();\n      setMessage(data.id ? 'Booking confirmed!' : 'Booking failed.');\n      setBookingServiceId(null);\n      setBookingDate('');\n    } catch (err) {\n      setMessage('Booking failed.');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: type === 'workshop' ? i18n.workshops : i18n.carWash\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row\",\n      children: [filtered.map(s => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-4\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card mb-3\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-body\",\n            children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n              children: s.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 61,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: s.description\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 62,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"Price: $\", s.price]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 63,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"d-flex justify-content-between mb-2\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-sm btn-outline-primary\",\n                onClick: () => setBookingServiceId(s.id),\n                children: i18n.bookNow\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 65,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 64,\n              columnNumber: 17\n            }, this), bookingServiceId === s.id && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"booking-form\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"date\",\n                value: bookingDate,\n                onChange: e => setBookingDate(e.target.value),\n                className: \"form-control mb-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 72,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-primary btn-sm\",\n                onClick: () => handleBooking(s.id),\n                children: \"Confirm Booking\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 78,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 71,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 13\n        }, this)\n      }, s.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 11\n      }, this)), filtered.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"alert alert-info\",\n        children: \"No services found.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 35\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this), message && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"alert alert-info mt-3\",\n      children: message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 19\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 5\n  }, this);\n}\n_s(ServiceList, \"gy+8IzkXZKC4ulMwWd17vUzk2uQ=\", false, function () {\n  return [useParams];\n});\n_c = ServiceList;\nvar _c;\n$RefreshReg$(_c, \"ServiceList\");","map":{"version":3,"names":["React","useEffect","useState","useContext","useParams","ApiContext","jsxDEV","_jsxDEV","ServiceList","i18n","_s","type","api","services","setServices","bookingServiceId","setBookingServiceId","bookingDate","setBookingDate","message","setMessage","fetch","headers","then","r","json","data","Array","isArray","catch","filtered","filter","s","handleBooking","serviceId","bookingData","service_id","date","user_id","res","method","body","JSON","stringify","id","err","children","workshops","carWash","fileName","_jsxFileName","lineNumber","columnNumber","className","map","name","description","price","onClick","bookNow","value","onChange","e","target","length","_c","$RefreshReg$"],"sources":["C:/Users/RVAISH/Downloads/AutoOne/frontend/src/pages/ServiceList.js"],"sourcesContent":["import React, { useEffect, useState, useContext } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { ApiContext } from '../App';\n\nexport default function ServiceList({ i18n }) {\n  const { type } = useParams();\n  const { api } = useContext(ApiContext);\n  const [services, setServices] = useState([]);\n  const [bookingServiceId, setBookingServiceId] = useState(null);\n  const [bookingDate, setBookingDate] = useState('');\n  const [message, setMessage] = useState('');\n\n  useEffect(() => {\n    fetch(`${api}/api/services`, { headers: { 'Accept': 'application/json' } })\n      .then(r => r.json())\n      .then(data => {\n        if (Array.isArray(data)) setServices(data);\n        else if (data.data && Array.isArray(data.data)) setServices(data.data);\n        else setServices([]);\n      })\n      .catch(() => setServices([]));\n  }, [api]);\n\n  const filtered = Array.isArray(services) ? services.filter(s => s.type === type) : [];\n\n  const handleBooking = async (serviceId) => {\n    if (!bookingDate) {\n      setMessage('Please select a date.');\n      return;\n    }\n\n    const bookingData = {\n      service_id: serviceId,\n      date: bookingDate,\n      user_id: 1, // dummy user_id for now\n    };\n\n    try {\n      const res = await fetch(`${api}/api/bookings`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(bookingData),\n      });\n      const data = await res.json();\n      setMessage(data.id ? 'Booking confirmed!' : 'Booking failed.');\n      setBookingServiceId(null);\n      setBookingDate('');\n    } catch (err) {\n      setMessage('Booking failed.');\n    }\n  };\n\n  return (\n    <div>\n      <h2>{type === 'workshop' ? i18n.workshops : i18n.carWash}</h2>\n      <div className=\"row\">\n        {filtered.map(s => (\n          <div className=\"col-md-4\" key={s.id}>\n            <div className=\"card mb-3\">\n              <div className=\"card-body\">\n                <h5>{s.name}</h5>\n                <p>{s.description}</p>\n                <p>Price: ${s.price}</p>\n                <div className=\"d-flex justify-content-between mb-2\">\n                  <button className=\"btn btn-sm btn-outline-primary\" onClick={() => setBookingServiceId(s.id)}>\n                    {i18n.bookNow}\n                  </button>\n                </div>\n\n                {bookingServiceId === s.id && (\n                  <div className=\"booking-form\">\n                    <input\n                      type=\"date\"\n                      value={bookingDate}\n                      onChange={(e) => setBookingDate(e.target.value)}\n                      className=\"form-control mb-2\"\n                    />\n                    <button\n                      className=\"btn btn-primary btn-sm\"\n                      onClick={() => handleBooking(s.id)}\n                    >\n                      Confirm Booking\n                    </button>\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n        ))}\n        {filtered.length === 0 && <div className=\"alert alert-info\">No services found.</div>}\n      </div>\n      {message && <div className=\"alert alert-info mt-3\">{message}</div>}\n    </div>\n  );\n}\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,EAAEC,UAAU,QAAQ,OAAO;AAC9D,SAASC,SAAS,QAAQ,kBAAkB;AAC5C,SAASC,UAAU,QAAQ,QAAQ;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEpC,eAAe,SAASC,WAAWA,CAAC;EAAEC;AAAK,CAAC,EAAE;EAAAC,EAAA;EAC5C,MAAM;IAAEC;EAAK,CAAC,GAAGP,SAAS,CAAC,CAAC;EAC5B,MAAM;IAAEQ;EAAI,CAAC,GAAGT,UAAU,CAACE,UAAU,CAAC;EACtC,MAAM,CAACQ,QAAQ,EAAEC,WAAW,CAAC,GAAGZ,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAACa,gBAAgB,EAAEC,mBAAmB,CAAC,GAAGd,QAAQ,CAAC,IAAI,CAAC;EAC9D,MAAM,CAACe,WAAW,EAAEC,cAAc,CAAC,GAAGhB,QAAQ,CAAC,EAAE,CAAC;EAClD,MAAM,CAACiB,OAAO,EAAEC,UAAU,CAAC,GAAGlB,QAAQ,CAAC,EAAE,CAAC;EAE1CD,SAAS,CAAC,MAAM;IACdoB,KAAK,CAAC,GAAGT,GAAG,eAAe,EAAE;MAAEU,OAAO,EAAE;QAAE,QAAQ,EAAE;MAAmB;IAAE,CAAC,CAAC,CACxEC,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACC,IAAI,CAAC,CAAC,CAAC,CACnBF,IAAI,CAACG,IAAI,IAAI;MACZ,IAAIC,KAAK,CAACC,OAAO,CAACF,IAAI,CAAC,EAAEZ,WAAW,CAACY,IAAI,CAAC,CAAC,KACtC,IAAIA,IAAI,CAACA,IAAI,IAAIC,KAAK,CAACC,OAAO,CAACF,IAAI,CAACA,IAAI,CAAC,EAAEZ,WAAW,CAACY,IAAI,CAACA,IAAI,CAAC,CAAC,KAClEZ,WAAW,CAAC,EAAE,CAAC;IACtB,CAAC,CAAC,CACDe,KAAK,CAAC,MAAMf,WAAW,CAAC,EAAE,CAAC,CAAC;EACjC,CAAC,EAAE,CAACF,GAAG,CAAC,CAAC;EAET,MAAMkB,QAAQ,GAAGH,KAAK,CAACC,OAAO,CAACf,QAAQ,CAAC,GAAGA,QAAQ,CAACkB,MAAM,CAACC,CAAC,IAAIA,CAAC,CAACrB,IAAI,KAAKA,IAAI,CAAC,GAAG,EAAE;EAErF,MAAMsB,aAAa,GAAG,MAAOC,SAAS,IAAK;IACzC,IAAI,CAACjB,WAAW,EAAE;MAChBG,UAAU,CAAC,uBAAuB,CAAC;MACnC;IACF;IAEA,MAAMe,WAAW,GAAG;MAClBC,UAAU,EAAEF,SAAS;MACrBG,IAAI,EAAEpB,WAAW;MACjBqB,OAAO,EAAE,CAAC,CAAE;IACd,CAAC;IAED,IAAI;MACF,MAAMC,GAAG,GAAG,MAAMlB,KAAK,CAAC,GAAGT,GAAG,eAAe,EAAE;QAC7C4B,MAAM,EAAE,MAAM;QACdlB,OAAO,EAAE;UAAE,cAAc,EAAE;QAAmB,CAAC;QAC/CmB,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACR,WAAW;MAClC,CAAC,CAAC;MACF,MAAMT,IAAI,GAAG,MAAMa,GAAG,CAACd,IAAI,CAAC,CAAC;MAC7BL,UAAU,CAACM,IAAI,CAACkB,EAAE,GAAG,oBAAoB,GAAG,iBAAiB,CAAC;MAC9D5B,mBAAmB,CAAC,IAAI,CAAC;MACzBE,cAAc,CAAC,EAAE,CAAC;IACpB,CAAC,CAAC,OAAO2B,GAAG,EAAE;MACZzB,UAAU,CAAC,iBAAiB,CAAC;IAC/B;EACF,CAAC;EAED,oBACEb,OAAA;IAAAuC,QAAA,gBACEvC,OAAA;MAAAuC,QAAA,EAAKnC,IAAI,KAAK,UAAU,GAAGF,IAAI,CAACsC,SAAS,GAAGtC,IAAI,CAACuC;IAAO;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CAAC,eAC9D7C,OAAA;MAAK8C,SAAS,EAAC,KAAK;MAAAP,QAAA,GACjBhB,QAAQ,CAACwB,GAAG,CAACtB,CAAC,iBACbzB,OAAA;QAAK8C,SAAS,EAAC,UAAU;QAAAP,QAAA,eACvBvC,OAAA;UAAK8C,SAAS,EAAC,WAAW;UAAAP,QAAA,eACxBvC,OAAA;YAAK8C,SAAS,EAAC,WAAW;YAAAP,QAAA,gBACxBvC,OAAA;cAAAuC,QAAA,EAAKd,CAAC,CAACuB;YAAI;cAAAN,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAK,CAAC,eACjB7C,OAAA;cAAAuC,QAAA,EAAId,CAAC,CAACwB;YAAW;cAAAP,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eACtB7C,OAAA;cAAAuC,QAAA,GAAG,UAAQ,EAACd,CAAC,CAACyB,KAAK;YAAA;cAAAR,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eACxB7C,OAAA;cAAK8C,SAAS,EAAC,qCAAqC;cAAAP,QAAA,eAClDvC,OAAA;gBAAQ8C,SAAS,EAAC,gCAAgC;gBAACK,OAAO,EAAEA,CAAA,KAAM1C,mBAAmB,CAACgB,CAAC,CAACY,EAAE,CAAE;gBAAAE,QAAA,EACzFrC,IAAI,CAACkD;cAAO;gBAAAV,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACP;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACN,CAAC,EAELrC,gBAAgB,KAAKiB,CAAC,CAACY,EAAE,iBACxBrC,OAAA;cAAK8C,SAAS,EAAC,cAAc;cAAAP,QAAA,gBAC3BvC,OAAA;gBACEI,IAAI,EAAC,MAAM;gBACXiD,KAAK,EAAE3C,WAAY;gBACnB4C,QAAQ,EAAGC,CAAC,IAAK5C,cAAc,CAAC4C,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE;gBAChDP,SAAS,EAAC;cAAmB;gBAAAJ,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAC9B,CAAC,eACF7C,OAAA;gBACE8C,SAAS,EAAC,wBAAwB;gBAClCK,OAAO,EAAEA,CAAA,KAAMzB,aAAa,CAACD,CAAC,CAACY,EAAE,CAAE;gBAAAE,QAAA,EACpC;cAED;gBAAAG,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACN,CACN;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACE;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH;MAAC,GA7BuBpB,CAAC,CAACY,EAAE;QAAAK,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OA8B9B,CACN,CAAC,EACDtB,QAAQ,CAACkC,MAAM,KAAK,CAAC,iBAAIzD,OAAA;QAAK8C,SAAS,EAAC,kBAAkB;QAAAP,QAAA,EAAC;MAAkB;QAAAG,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACjF,CAAC,EACLjC,OAAO,iBAAIZ,OAAA;MAAK8C,SAAS,EAAC,uBAAuB;MAAAP,QAAA,EAAE3B;IAAO;MAAA8B,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAM,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAC/D,CAAC;AAEV;AAAC1C,EAAA,CA1FuBF,WAAW;EAAA,QAChBJ,SAAS;AAAA;AAAA6D,EAAA,GADJzD,WAAW;AAAA,IAAAyD,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}