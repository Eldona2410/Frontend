{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\RVAISH\\\\Downloads\\\\AutoOne\\\\frontend\\\\src\\\\pages\\\\BookingForm.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useContext } from \"react\";\nimport { useNavigate, useParams } from \"react-router-dom\";\nimport { ApiContext, AuthContext } from \"../App\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function BookingForm({\n  i18n\n}) {\n  _s();\n  const {\n    api\n  } = useContext(ApiContext);\n  const {\n    auth\n  } = useContext(AuthContext);\n  const navigate = useNavigate();\n  const {\n    id\n  } = useParams();\n  const [service, setService] = useState(null);\n  const [date, setDate] = useState(\"\");\n  const [message, setMessage] = useState(\"\");\n  useEffect(() => {\n    if (!auth.token) {\n      navigate(\"/login\");\n    }\n  }, [auth.token, navigate]);\n  useEffect(() => {\n    fetch(`${api}/api/services/${id}`, {\n      headers: {\n        Accept: \"application/json\"\n      }\n    }).then(res => res.json()).then(data => setService(data)).catch(() => setService(null));\n  }, [api, id]);\n  const handleBooking = e => {\n    e.preventDefault();\n    if (!auth.token) return;\n    const bookingData = {\n      service_id: service.id,\n      date: date,\n      user_id: auth.user.id // logged-in user\n    };\n    fetch(`${api}/api/bookings`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${auth.token}` // very important!\n      },\n      body: JSON.stringify({\n        service_id: selectedService,\n        date\n      })\n    }).then(res => res.json()).then(data => {\n      if (data.id) {\n        setMessage(\"Booking confirmed!\");\n        setDate(\"\");\n      } else {\n        setMessage(data.message || \"Booking failed\");\n      }\n    }).catch(() => setMessage(\"Booking failed\"));\n  };\n  if (!service) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"Loading...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 24\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"max-w-md mx-auto p-4 border rounded shadow\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-xl font-bold mb-4\",\n      children: [i18n.bookService || \"Book a Service\", \": \", service.name]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this), message && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"mb-2 text-blue-600\",\n      children: message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 19\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleBooking,\n      className: \"space-y-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"block mb-1\",\n          children: i18n.chooseDate || \"Choose Date:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"date\",\n          value: date,\n          onChange: e => setDate(e.target.value),\n          className: \"w-full border p-2 rounded\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"w-full bg-blue-500 text-white py-2 rounded\",\n        children: i18n.confirmBooking || \"Confirm Booking\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 5\n  }, this);\n}\n_s(BookingForm, \"YJFhEj1BakScc4AjUzQslKtc1bk=\", false, function () {\n  return [useNavigate, useParams];\n});\n_c = BookingForm;\nvar _c;\n$RefreshReg$(_c, \"BookingForm\");","map":{"version":3,"names":["React","useState","useEffect","useContext","useNavigate","useParams","ApiContext","AuthContext","jsxDEV","_jsxDEV","BookingForm","i18n","_s","api","auth","navigate","id","service","setService","date","setDate","message","setMessage","token","fetch","headers","Accept","then","res","json","data","catch","handleBooking","e","preventDefault","bookingData","service_id","user_id","user","method","body","JSON","stringify","selectedService","children","fileName","_jsxFileName","lineNumber","columnNumber","className","bookService","name","onSubmit","chooseDate","type","value","onChange","target","required","confirmBooking","_c","$RefreshReg$"],"sources":["C:/Users/RVAISH/Downloads/AutoOne/frontend/src/pages/BookingForm.js"],"sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\nimport { useNavigate, useParams } from \"react-router-dom\";\nimport { ApiContext, AuthContext } from \"../App\";\n\nexport default function BookingForm({ i18n }) {\n  const { api } = useContext(ApiContext);\n  const { auth } = useContext(AuthContext);\n  const navigate = useNavigate();\n  const { id } = useParams();\n\n  const [service, setService] = useState(null);\n  const [date, setDate] = useState(\"\");\n  const [message, setMessage] = useState(\"\");\n\nuseEffect(() => {\n  if (!auth.token) {\n    navigate(\"/login\");\n  }\n}, [auth.token, navigate]);\n\n  useEffect(() => {\n    fetch(`${api}/api/services/${id}`, { headers: { Accept: \"application/json\" } })\n      .then(res => res.json())\n      .then(data => setService(data))\n      .catch(() => setService(null));\n  }, [api, id]);\n\n  const handleBooking = (e) => {\n    e.preventDefault();\n    if (!auth.token) return;\n\n    const bookingData = {\n      service_id: service.id,\n      date: date,\n      user_id: auth.user.id // logged-in user\n    };\n\nfetch(`${api}/api/bookings`, {\n  method: 'POST',\n  headers: {\n    'Content-Type': 'application/json',\n    'Authorization': `Bearer ${auth.token}` // very important!\n  },\n  body: JSON.stringify({\n    service_id: selectedService,\n    date,\n  })\n})\n\n      .then(res => res.json())\n      .then(data => {\n        if (data.id) {\n          setMessage(\"Booking confirmed!\");\n          setDate(\"\");\n        } else {\n          setMessage(data.message || \"Booking failed\");\n        }\n      })\n      .catch(() => setMessage(\"Booking failed\"));\n  };\n\n  if (!service) return <div>Loading...</div>;\n\n  return (\n    <div className=\"max-w-md mx-auto p-4 border rounded shadow\">\n      <h2 className=\"text-xl font-bold mb-4\">\n        {i18n.bookService || \"Book a Service\"}: {service.name}\n      </h2>\n\n      {message && <p className=\"mb-2 text-blue-600\">{message}</p>}\n\n      <form onSubmit={handleBooking} className=\"space-y-4\">\n        <div>\n          <label className=\"block mb-1\">{i18n.chooseDate || \"Choose Date:\"}</label>\n          <input\n            type=\"date\"\n            value={date}\n            onChange={(e) => setDate(e.target.value)}\n            className=\"w-full border p-2 rounded\"\n            required\n          />\n        </div>\n\n        <button type=\"submit\" className=\"w-full bg-blue-500 text-white py-2 rounded\">\n          {i18n.confirmBooking || \"Confirm Booking\"}\n        </button>\n      </form>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}